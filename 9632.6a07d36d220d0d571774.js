(self.webpackChunkpantau_dashboard=self.webpackChunkpantau_dashboard||[]).push([[9632],{3187:C=>{var T={utf8:{stringToBytes:function(u){return T.bin.stringToBytes(unescape(encodeURIComponent(u)))},bytesToString:function(u){return decodeURIComponent(escape(T.bin.bytesToString(u)))}},bin:{stringToBytes:function(u){for(var i=[],l=0;l<u.length;l++)i.push(255&u.charCodeAt(l));return i},bytesToString:function(u){for(var i=[],l=0;l<u.length;l++)i.push(String.fromCharCode(u[l]));return i.join("")}}};C.exports=T},8278:C=>{var T,u;T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",C.exports=u={rotl:function(i,l){return i<<l|i>>>32-l},rotr:function(i,l){return i<<32-l|i>>>l},endian:function(i){if(i.constructor==Number)return 16711935&u.rotl(i,8)|4278255360&u.rotl(i,24);for(var l=0;l<i.length;l++)i[l]=u.endian(i[l]);return i},randomBytes:function(i){for(var l=[];i>0;i--)l.push(Math.floor(256*Math.random()));return l},bytesToWords:function(i){for(var l=[],a=0,Z=0;a<i.length;a++,Z+=8)l[Z>>>5]|=i[a]<<24-Z%32;return l},wordsToBytes:function(i){for(var l=[],a=0;a<32*i.length;a+=8)l.push(i[a>>>5]>>>24-a%32&255);return l},bytesToHex:function(i){for(var l=[],a=0;a<i.length;a++)l.push((i[a]>>>4).toString(16)),l.push((15&i[a]).toString(16));return l.join("")},hexToBytes:function(i){for(var l=[],a=0;a<i.length;a+=2)l.push(parseInt(i.substr(a,2),16));return l},bytesToBase64:function(i){for(var l=[],a=0;a<i.length;a+=3)for(var Z=i[a]<<16|i[a+1]<<8|i[a+2],p=0;p<4;p++)l.push(8*a+6*p<=8*i.length?T.charAt(Z>>>6*(3-p)&63):"=");return l.join("")},base64ToBytes:function(i){i=i.replace(/[^A-Z0-9+\/]/gi,"");for(var l=[],a=0,Z=0;a<i.length;Z=++a%4)0!=Z&&l.push((T.indexOf(i.charAt(a-1))&Math.pow(2,-2*Z+8)-1)<<2*Z|T.indexOf(i.charAt(a))>>>6-2*Z);return l}}},8646:C=>{function T(i){return!!i.constructor&&"function"==typeof i.constructor.isBuffer&&i.constructor.isBuffer(i)}C.exports=function(i){return null!=i&&(T(i)||function(i){return"function"==typeof i.readFloatLE&&"function"==typeof i.slice&&T(i.slice(0,0))}(i)||!!i._isBuffer)}},8559:(C,T,u)=>{var i,l,a,Z,p;i=u(8278),l=u(3187).utf8,a=u(8646),Z=u(3187).bin,(p=function(d,g){d.constructor==String?d=g&&"binary"===g.encoding?Z.stringToBytes(d):l.stringToBytes(d):a(d)?d=Array.prototype.slice.call(d,0):!Array.isArray(d)&&d.constructor!==Uint8Array&&(d=d.toString());for(var t=i.bytesToWords(d),F=8*d.length,n=1732584193,o=-271733879,e=-1732584194,r=271733878,s=0;s<t.length;s++)t[s]=16711935&(t[s]<<8|t[s]>>>24)|4278255360&(t[s]<<24|t[s]>>>8);t[F>>>5]|=128<<F%32,t[14+(F+64>>>9<<4)]=F;var h=p._ff,v=p._gg,w=p._hh,c=p._ii;for(s=0;s<t.length;s+=16){var A=n,f=o,y=e,m=r;n=h(n,o,e,r,t[s+0],7,-680876936),r=h(r,n,o,e,t[s+1],12,-389564586),e=h(e,r,n,o,t[s+2],17,606105819),o=h(o,e,r,n,t[s+3],22,-1044525330),n=h(n,o,e,r,t[s+4],7,-176418897),r=h(r,n,o,e,t[s+5],12,1200080426),e=h(e,r,n,o,t[s+6],17,-1473231341),o=h(o,e,r,n,t[s+7],22,-45705983),n=h(n,o,e,r,t[s+8],7,1770035416),r=h(r,n,o,e,t[s+9],12,-1958414417),e=h(e,r,n,o,t[s+10],17,-42063),o=h(o,e,r,n,t[s+11],22,-1990404162),n=h(n,o,e,r,t[s+12],7,1804603682),r=h(r,n,o,e,t[s+13],12,-40341101),e=h(e,r,n,o,t[s+14],17,-1502002290),n=v(n,o=h(o,e,r,n,t[s+15],22,1236535329),e,r,t[s+1],5,-165796510),r=v(r,n,o,e,t[s+6],9,-1069501632),e=v(e,r,n,o,t[s+11],14,643717713),o=v(o,e,r,n,t[s+0],20,-373897302),n=v(n,o,e,r,t[s+5],5,-701558691),r=v(r,n,o,e,t[s+10],9,38016083),e=v(e,r,n,o,t[s+15],14,-660478335),o=v(o,e,r,n,t[s+4],20,-405537848),n=v(n,o,e,r,t[s+9],5,568446438),r=v(r,n,o,e,t[s+14],9,-1019803690),e=v(e,r,n,o,t[s+3],14,-187363961),o=v(o,e,r,n,t[s+8],20,1163531501),n=v(n,o,e,r,t[s+13],5,-1444681467),r=v(r,n,o,e,t[s+2],9,-51403784),e=v(e,r,n,o,t[s+7],14,1735328473),n=w(n,o=v(o,e,r,n,t[s+12],20,-1926607734),e,r,t[s+5],4,-378558),r=w(r,n,o,e,t[s+8],11,-2022574463),e=w(e,r,n,o,t[s+11],16,1839030562),o=w(o,e,r,n,t[s+14],23,-35309556),n=w(n,o,e,r,t[s+1],4,-1530992060),r=w(r,n,o,e,t[s+4],11,1272893353),e=w(e,r,n,o,t[s+7],16,-155497632),o=w(o,e,r,n,t[s+10],23,-1094730640),n=w(n,o,e,r,t[s+13],4,681279174),r=w(r,n,o,e,t[s+0],11,-358537222),e=w(e,r,n,o,t[s+3],16,-722521979),o=w(o,e,r,n,t[s+6],23,76029189),n=w(n,o,e,r,t[s+9],4,-640364487),r=w(r,n,o,e,t[s+12],11,-421815835),e=w(e,r,n,o,t[s+15],16,530742520),n=c(n,o=w(o,e,r,n,t[s+2],23,-995338651),e,r,t[s+0],6,-198630844),r=c(r,n,o,e,t[s+7],10,1126891415),e=c(e,r,n,o,t[s+14],15,-1416354905),o=c(o,e,r,n,t[s+5],21,-57434055),n=c(n,o,e,r,t[s+12],6,1700485571),r=c(r,n,o,e,t[s+3],10,-1894986606),e=c(e,r,n,o,t[s+10],15,-1051523),o=c(o,e,r,n,t[s+1],21,-2054922799),n=c(n,o,e,r,t[s+8],6,1873313359),r=c(r,n,o,e,t[s+15],10,-30611744),e=c(e,r,n,o,t[s+6],15,-1560198380),o=c(o,e,r,n,t[s+13],21,1309151649),n=c(n,o,e,r,t[s+4],6,-145523070),r=c(r,n,o,e,t[s+11],10,-1120210379),e=c(e,r,n,o,t[s+2],15,718787259),o=c(o,e,r,n,t[s+9],21,-343485551),n=n+A>>>0,o=o+f>>>0,e=e+y>>>0,r=r+m>>>0}return i.endian([n,o,e,r])})._ff=function(d,g,t,F,n,o,e){var r=d+(g&t|~g&F)+(n>>>0)+e;return(r<<o|r>>>32-o)+g},p._gg=function(d,g,t,F,n,o,e){var r=d+(g&F|t&~F)+(n>>>0)+e;return(r<<o|r>>>32-o)+g},p._hh=function(d,g,t,F,n,o,e){var r=d+(g^t^F)+(n>>>0)+e;return(r<<o|r>>>32-o)+g},p._ii=function(d,g,t,F,n,o,e){var r=d+(t^(g|~F))+(n>>>0)+e;return(r<<o|r>>>32-o)+g},p._blocksize=16,p._digestsize=16,C.exports=function(d,g){if(null==d)throw new Error("Illegal argument "+d);var t=i.wordsToBytes(p(d,g));return g&&g.asBytes?t:g&&g.asString?Z.bytesToString(t):i.bytesToHex(t)}},9632:(C,T,u)=>{"use strict";u.r(T),u.d(T,{ForgotpasswordPageModule:()=>w});var i=u(8583),l=u(665),a=u(2859),Z=u(3955),p=u(4762),d=u(4742),g=u(8559),t=u(3018),F=u(1628),n=u(2005);function o(c,A){if(1&c){const f=t.EpF();t.TgZ(0,"ion-row"),t.TgZ(1,"ion-col",2),t._uU(2),t.qZA(),t.TgZ(3,"ion-col",3),t._uU(4),t.qZA(),t.TgZ(5,"ion-col",4),t._uU(6),t.qZA(),t.TgZ(7,"ion-col",2),t.TgZ(8,"ion-button",7),t.NdJ("click",function(){const x=t.CHM(f).$implicit;return t.oxw().resetPassword(x)}),t._uU(9,"Reset"),t.qZA(),t.TgZ(10,"ion-button",8),t.NdJ("click",function(){const x=t.CHM(f).$implicit;return t.oxw().closeResetPassword(x)}),t._uU(11,"Close"),t.qZA(),t.qZA(),t.qZA()}if(2&c){const f=A.$implicit;t.xp6(2),t.Oqu(f.detail.nik),t.xp6(2),t.Oqu(f.detail.name),t.xp6(2),t.Oqu(f.description)}}function e(c,A){1&c&&(t.TgZ(0,"ion-label",9),t._uU(1,"Belum ada permintaan reset password"),t.qZA())}const h=[{path:"",component:(()=>{class c{constructor(f,y,m,x,P,B){this.storage=f,this.loadingController=y,this.modalController=m,this.firestore=x,this.alertController=P,this.toastController=B,this.requestlist=[],this.column=[{label:"NIK"},{label:"Nama"},{label:"Description"}]}ngOnInit(){this.loadData()}loadData(){return(0,p.__awaiter)(this,void 0,void 0,function*(){var f=yield d.Z.firestore().collection("forgotpassword").where("status","==","open").get();f.empty?this.requestlist=[]:(this.requestlist=[],f.forEach(y=>(0,p.__awaiter)(this,void 0,void 0,function*(){var m=y.data();m.id=y.id;var x=yield d.Z.firestore().collection("pasien").where("nik","==",m.nik).get();x.empty||x.forEach(P=>{var B=P.data();B.id=P.id,m.detail=B}),this.requestlist.push(m)})))})}resetPassword(f){return(0,p.__awaiter)(this,void 0,void 0,function*(){console.log("Data:",f),yield(yield this.alertController.create({cssClass:"my-custom-class",header:"Reset Password "+f.detail.name,inputs:[{name:"newpassword",type:"password",placeholder:"Masukkan Password baru",cssClass:"specialClass"}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:()=>{console.log("Confirm Cancel")}},{text:"Ok",handler:m=>{d.Z.firestore().collection("pasien").doc(f.detail.id).update({password:g(m.newpassword)}).then(()=>(0,p.__awaiter)(this,void 0,void 0,function*(){d.Z.firestore().collection("forgotpassword").doc(f.id).update({status:"closed"}),(yield this.toastController.create({message:"Password berhasil dirubah",duration:3e3,color:"success"})).present(),this.loadData()}))}}]})).present()})}closeResetPassword(f){d.Z.firestore().collection("forgotpassword").doc(f.id).update({status:"closed"}).then(()=>(0,p.__awaiter)(this,void 0,void 0,function*(){(yield this.toastController.create({message:"Password berhasil dirubah",duration:3e3,color:"success"})).present(),setTimeout(()=>{this.loadData()},500)}))}}return c.\u0275fac=function(f){return new(f||c)(t.Y36(F.K),t.Y36(a.HT),t.Y36(a.IN),t.Y36(n.ST),t.Y36(a.Br),t.Y36(a.yF))},c.\u0275cmp=t.Xpm({type:c,selectors:[["app-forgotpassword"]],decls:21,vars:2,consts:[[1,"ion-margin"],[1,"first-row"],["size","2"],["size","3"],["size","5"],[4,"ngFor","ngForOf"],["color","secondary","class","ion-align-self-center",4,"ngIf"],["size","small","color","primary","fill","clear",3,"click"],["size","small","fill","clear","color","danger",3,"click"],["color","secondary",1,"ion-align-self-center"]],template:function(f,y){1&f&&(t.TgZ(0,"ion-header"),t.TgZ(1,"ion-toolbar"),t.TgZ(2,"ion-title"),t._uU(3,"Request Reset Password Pasien"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(4,"ion-content"),t.TgZ(5,"ion-grid",0),t.TgZ(6,"ion-row",1),t.TgZ(7,"ion-col",2),t.TgZ(8,"b"),t._uU(9,"NIK"),t.qZA(),t.qZA(),t.TgZ(10,"ion-col",3),t.TgZ(11,"b"),t._uU(12,"Nama"),t.qZA(),t.qZA(),t.TgZ(13,"ion-col",4),t.TgZ(14,"b"),t._uU(15,"Deskripsi"),t.qZA(),t.qZA(),t.TgZ(16,"ion-col",2),t.TgZ(17,"b"),t._uU(18,"Action"),t.qZA(),t.qZA(),t.qZA(),t.YNc(19,o,12,3,"ion-row",5),t.qZA(),t.YNc(20,e,2,0,"ion-label",6),t.qZA()),2&f&&(t.xp6(19),t.Q6J("ngForOf",y.requestlist),t.xp6(1),t.Q6J("ngIf",0==y.requestlist.length))},directives:[a.Gu,a.sr,a.wd,a.W2,a.jY,a.Nd,a.wI,i.sg,i.O5,a.YG,a.Q$],styles:[""]}),c})()}];let v=(()=>{class c{}return c.\u0275fac=function(f){return new(f||c)},c.\u0275mod=t.oAB({type:c}),c.\u0275inj=t.cJS({imports:[[Z.Bz.forChild(h)],Z.Bz]}),c})(),w=(()=>{class c{}return c.\u0275fac=function(f){return new(f||c)},c.\u0275mod=t.oAB({type:c}),c.\u0275inj=t.cJS({imports:[[i.ez,l.u5,a.Pc,v]]}),c})()}}]);