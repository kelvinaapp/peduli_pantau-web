{"version":3,"file":"default-src_app_add-admin_add-admin_page_ts.js","mappings":"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","sources":["./src/app/add-admin/add-admin.page.ts","./src/app/add-admin/add-admin.page.html"],"sourcesContent":["import { Component, OnInit,Input} from '@angular/core';\r\nimport { Storage } from '@ionic/storage-angular';\r\nimport { AngularFirestore } from '@angular/fire/firestore';\r\nimport { ToastController,ModalController,PopoverController,AlertController,LoadingController } from '@ionic/angular';\r\nimport { FormGroup, FormBuilder, Validators } from \"@angular/forms\";\r\nimport * as moment from 'moment';\r\nimport * as md5 from 'md5';\r\nimport firebase from 'firebase';\r\nvar loading;\r\n\r\n\r\n@Component({\r\n  selector: 'app-add-admin',\r\n  templateUrl: './add-admin.page.html',\r\n  styleUrls: ['./add-admin.page.scss'],\r\n})\r\nexport class AddAdminPage implements OnInit {\r\n  @Input() onGoBack:any;\r\n  @Input() data:any;\r\n  @Input() isEdit :any;\r\n  ionicForm: FormGroup;\r\n  forms : any;\r\n  constructor(\r\n      private loadingController:LoadingController,\r\n      public formBuilder: FormBuilder,\r\n      private modalController : ModalController,\r\n      private toastController:ToastController,\r\n      private firestore:AngularFirestore\r\n  ){\r\n    this.forms = [\r\n      {label:\"NIK\",type:\"number\",secure:false,value:\"\",name:\"nik\"},\r\n      {label:\"Nama Lengkap\",type:\"text\",secure:false,value:\"\",name:\"name\"},\r\n      {label:\"Alamat\",type:\"text\",secure:false,value:\"\",name:\"alamat\"},\r\n      {label:\"Username\",type:\"text\",secure:false,value:\"\",name:\"username\"},\r\n      {label:\"Password\",type:\"password\",secure:false,value:\"\",name:\"password\"},\r\n      {label:\"Privileges\",type:\"radio\",secure:false,value:\"\",name:\"privileges\",option:[\r\n        {label:\"Superadmin\",value:\"superadmin\"},\r\n        {label:\"Admin\",value:\"admin\"},\r\n      ]},\r\n    ]\r\n  }\r\n\r\n  ngOnInit() {\r\n    if(this.isEdit){\r\n      this.forms = [\r\n        {label:\"NIK\",type:\"number\",secure:false,value:this.data.nik,name:\"nik\"},\r\n        {label:\"Nama Lengkap\",type:\"text\",secure:false,value:this.data.name,name:\"name\"},\r\n        {label:\"Alamat\",type:\"text\",secure:false,value:this.data.alamat,name:\"alamat\"},\r\n        {label:\"Username\",type:\"text\",secure:false,value:this.data.username,name:\"username\"},\r\n        {label:\"Password\",type:\"password\",secure:false,value:this.data.password,name:\"password\"},\r\n        {label:\"Privileges\",type:\"radio\",secure:false,value:this.data.privileges,name:\"privileges\",option:[\r\n          {label:\"Superadmin\",value:\"superadmin\"},\r\n          {label:\"Admin\",value:\"admin\"},\r\n        ]},\r\n      ]\r\n      this.ionicForm = this.formBuilder.group({\r\n        nik: [this.data.nik, [Validators.required,Validators.minLength(2)]],\r\n        name: [this.data.name, [Validators.required, Validators.minLength(2)]],\r\n        alamat:[this.data.alamat, [Validators.required,Validators.minLength(2)]],\r\n        username: [this.data.username, [Validators.required, Validators.minLength(2)]],\r\n        password: [this.data.password, [Validators.required, Validators.minLength(2)]],\r\n        privileges: [this.data.privileges, [Validators.required, Validators.minLength(2)]],\r\n      })\r\n    }\r\n    else{\r\n      this.ionicForm = this.formBuilder.group({\r\n        nik: ['', [Validators.required,Validators.minLength(2)]],\r\n        name: ['', [Validators.required, Validators.minLength(2)]],\r\n        alamat:['', [Validators.required,Validators.minLength(2)]],\r\n        username: ['', [Validators.required, Validators.minLength(2)]],\r\n        password: ['', [Validators.required, Validators.minLength(2)]],\r\n        privileges: ['', [Validators.required, Validators.minLength(2)]],\r\n      })\r\n    }\r\n  }\r\n\r\n  async submit(){\r\n    this.showLoading();\r\n    if(this.isEdit){\r\n      if(this.ionicForm.valid){\r\n        var newdata = this.ionicForm.value;\r\n        newdata.password = md5(newdata.password);\r\n        newdata.updated_at = moment().valueOf();\r\n        firebase.firestore().collection(\"admin\").doc(this.data.id).update(newdata).then(async()=>{\r\n          this.hideLoading();\r\n          var toast = await this.toastController.create({\r\n            message:\"Admin berhasil diupdate\",\r\n            duration:3000,\r\n            color:\"success\"\r\n          })\r\n          toast.present();\r\n          this.onGoBack();\r\n          this.modalController.dismiss();\r\n        }).catch(async (er)=>{\r\n          this.hideLoading();\r\n          var toast = await this.toastController.create({\r\n            message:\"Admin gagal diupdate:\"+er.message,\r\n            duration:5000,\r\n            color:\"danger\"\r\n          })\r\n          toast.present();\r\n          this.onGoBack();\r\n          this.modalController.dismiss();\r\n        })\r\n      }\r\n      else{\r\n        var toast = await this.toastController.create({\r\n          message:\"Mohon isi semua form\",\r\n          duration:3000,\r\n          color:\"danger\"\r\n        })\r\n        toast.present();\r\n      }\r\n    }\r\n    else{\r\n      if(this.ionicForm.valid){\r\n        var newdata = this.ionicForm.value;\r\n        newdata.password = md5(newdata.password);\r\n        newdata.created_at = moment().valueOf();\r\n        firebase.firestore().collection(\"admin\").add(newdata).then(async()=>{\r\n          this.hideLoading();\r\n          var toast = await this.toastController.create({\r\n            message:\"Admin berhasil ditambah\",\r\n            duration:3000,\r\n            color:\"success\"\r\n          })\r\n          toast.present();\r\n          this.onGoBack();\r\n          this.modalController.dismiss();\r\n        }).catch(async (er)=>{\r\n          this.hideLoading();\r\n          var toast = await this.toastController.create({\r\n            message:\"Admin gagal ditambakan:\"+er.message,\r\n            duration:5000,\r\n            color:\"danger\"\r\n          })\r\n          toast.present();\r\n          this.onGoBack();\r\n          this.modalController.dismiss();\r\n        })\r\n      }\r\n      else{\r\n        var toast = await this.toastController.create({\r\n          message:\"Mohon isi semua form\",\r\n          duration:3000,\r\n          color:\"danger\"\r\n        })\r\n        toast.present();\r\n      }\r\n    }\r\n  }\r\n\r\n  close(){\r\n    this.modalController.dismiss();\r\n  }\r\n\r\n  async showLoading(){\r\n    loading = await this.loadingController.create({\r\n     cssClass: 'my-custom-class',\r\n     message: 'Please wait...',\r\n   });\r\n   await loading.present();\r\n  }\r\n  hideLoading(){\r\n    loading.dismiss();\r\n  }\r\n\r\n}\r\n","export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-button (click)=\\\"close()\\\">\\r\\n        <ion-icon name=\\\"close\\\"></ion-icon>\\r\\n      </ion-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title>Tambah Admin</ion-title>\\r\\n    \\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content class=\\\"ion-padding\\\">\\r\\n  <ion-list>\\r\\n    <form [formGroup]=\\\"ionicForm\\\" (ngSubmit)=\\\"submit()\\\">\\r\\n      <ion-item *ngFor=\\\"let form of forms\\\">\\r\\n        <ion-label>{{form.label}}</ion-label>\\r\\n        <ion-input [formControlName]=\\\"form.name\\\" type=\\\"text\\\" *ngIf=\\\"form.type == 'text'\\\" [(ngModel)]=\\\"form.value\\\"></ion-input>\\r\\n        <ion-input [formControlName]=\\\"form.name\\\" type=\\\"password\\\" *ngIf=\\\"form.type == 'password'\\\" [(ngModel)]=\\\"form.value\\\"></ion-input>\\r\\n        <ion-input [formControlName]=\\\"form.name\\\" type=\\\"number\\\" *ngIf=\\\"form.type == 'number'\\\" [(ngModel)]=\\\"form.value\\\"></ion-input>\\r\\n        <ion-radio-group [formControlName]=\\\"form.name\\\" *ngIf=\\\"form.type == 'radio'\\\" [(ngModel)]=\\\"form.value\\\">\\r\\n          <ion-item *ngFor=\\\"let opt of form.option\\\">\\r\\n            <ion-radio [value]=\\\"opt.value\\\"></ion-radio>\\r\\n            <ion-label>{{opt.label}}</ion-label>\\r\\n          </ion-item>\\r\\n        </ion-radio-group>\\r\\n      </ion-item>\\r\\n      <ion-button type=\\\"submit\\\">Submit</ion-button>\\r\\n      </form>\\r\\n  </ion-list>\\r\\n\\r\\n</ion-content>\\r\\n\";"],"names":[],"sourceRoot":"webpack:///"}