"use strict";(self.webpackChunkpantau_dashboard=self.webpackChunkpantau_dashboard||[]).push([[3385],{3385:(y,g,n)=>{n.r(g),n.d(g,{EdukasiPageModule:()=>_});var u,m=n(8583),p=n(665),o=n(2859),h=n(3955),r=n(4762),k=n(6738),f=n(4742),Z=n(6974),T=n(7152),t=n(3018),v=n(1628),C=n(2005);function E(i,l){if(1&i&&(t.TgZ(0,"ion-label"),t.TgZ(1,"b"),t._uU(2),t.qZA(),t.qZA()),2&i){const e=l.$implicit;t.xp6(2),t.Oqu(e.label)}}function b(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"ion-item"),t.TgZ(1,"ion-label"),t._uU(2),t.qZA(),t.TgZ(3,"ion-label"),t.TgZ(4,"ion-thumbnail"),t._UZ(5,"img",5),t.qZA(),t.qZA(),t.TgZ(6,"ion-label"),t._uU(7),t.qZA(),t.TgZ(8,"ion-label"),t._uU(9),t.qZA(),t.TgZ(10,"ion-label"),t.TgZ(11,"ion-button",6),t.NdJ("click",function(){const d=t.CHM(e).$implicit;return t.oxw().editEdukasi(d)}),t._uU(12,"Edit"),t.qZA(),t.TgZ(13,"ion-button",7),t.NdJ("click",function(){const d=t.CHM(e).$implicit;return t.oxw().deleteEdukasi(d.id)}),t._uU(14,"Delete"),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=l.$implicit;t.xp6(2),t.Oqu(e.judul),t.xp6(3),t.Q6J("src",e.gambar,t.LSH),t.xp6(2),t.Oqu(e.content.substr(0,100)),t.xp6(2),t.Oqu(e.formattedtime)}}const P=[{path:"",component:(()=>{class i{constructor(e,a,s,d,c){this.storage=e,this.loadingController=a,this.modalController=s,this.firestore=d,this.toastController=c,this.edukasi=[],this.tmpedukasi=[],this.column=[{label:"Judul"},{label:"Gambar"},{label:"Content"},{label:"Tanggal"},{label:"Action"}]}ngOnInit(){this.loadData()}loadData(){return(0,r.__awaiter)(this,void 0,void 0,function*(){var e=yield f.Z.firestore().collection("edukasi").get();e.empty?this.edukasi=[]:(this.edukasi=[],e.forEach(a=>{var s=a.data();s.id=a.id,s.formattedtime=k(s.created_at).format("DD MMM YYYY HH:mm"),this.edukasi.push(s)}),this.tmpedukasi=this.edukasi)})}addEdukasi(){return(0,r.__awaiter)(this,void 0,void 0,function*(){(yield this.modalController.create({component:Z.C,swipeToClose:!0,backdropDismiss:!1,componentProps:{onGoBack:()=>{this.loadData()}}})).present()})}editEdukasi(e){return(0,r.__awaiter)(this,void 0,void 0,function*(){(yield this.modalController.create({component:T.N,swipeToClose:!0,backdropDismiss:!1,componentProps:{onGoBack:()=>{this.loadData()},data:e}})).present()})}deleteEdukasi(e){this.showLoading(),f.Z.firestore().collection("edukasi").doc(e).delete().then(()=>(0,r.__awaiter)(this,void 0,void 0,function*(){this.hideLoading(),(yield this.toastController.create({message:"Edukasi berhasil dihapus",duration:3e3,color:"success"})).present(),setTimeout(()=>{this.loadData()},500)})).catch(a=>(0,r.__awaiter)(this,void 0,void 0,function*(){this.hideLoading(),(yield this.toastController.create({message:"Edukasi gagal dihapus:"+a.message,duration:3e3,color:"danger"})).present()}))}search(e){const a=e.detail.value;this.edukasi=this.tmpedukasi,this.edukasi=""==a?this.tmpedukasi:this.edukasi.filter(s=>s.judul.toLowerCase().includes(a.toLowerCase())||s.content.toLowerCase().includes(a.toLowerCase()))}showLoading(){return(0,r.__awaiter)(this,void 0,void 0,function*(){u=yield this.loadingController.create({cssClass:"my-custom-class",message:"Please wait..."}),yield u.present()})}hideLoading(){u.dismiss()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(v.K),t.Y36(o.HT),t.Y36(o.IN),t.Y36(C.ST),t.Y36(o.yF))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-edukasi"]],decls:13,vars:2,consts:[["slot","end"],["fill","clear",3,"click"],["placeholder","Search",3,"ionChange"],[1,"ion-padding"],[4,"ngFor","ngForOf"],["alt","",3,"src"],["fill","clear","color","primary",3,"click"],["fill","clear","color","danger",3,"click"]],template:function(e,a){1&e&&(t.TgZ(0,"ion-header"),t.TgZ(1,"ion-toolbar"),t.TgZ(2,"ion-title"),t._uU(3,"Edukasi"),t.qZA(),t.TgZ(4,"ion-buttons",0),t.TgZ(5,"ion-button",1),t.NdJ("click",function(){return a.addEdukasi()}),t._uU(6,"Tambah"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"ion-searchbar",2),t.NdJ("ionChange",function(d){return a.search(d)}),t.qZA(),t.qZA(),t.TgZ(8,"ion-content",3),t.TgZ(9,"ion-item"),t.YNc(10,E,3,1,"ion-label",4),t.qZA(),t.TgZ(11,"ion-list"),t.YNc(12,b,15,4,"ion-item",4),t.qZA(),t.qZA()),2&e&&(t.xp6(10),t.Q6J("ngForOf",a.column),t.xp6(2),t.Q6J("ngForOf",a.edukasi))},directives:[o.Gu,o.sr,o.wd,o.Sm,o.YG,o.VI,o.j9,o.W2,o.Ie,m.sg,o.q_,o.Q$,o.Bs],styles:["ion-item[_ngcontent-%COMP%]{text-align:left}ion-thumbnail[_ngcontent-%COMP%]{align-self:flex-start;margin:0}ion-label[_ngcontent-%COMP%]{align-self:center!important}"]}),i})()}];let A=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[h.Bz.forChild(P)],h.Bz]}),i})(),_=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[m.ez,p.u5,o.Pc,A]]}),i})()}}]);