{"version":3,"file":"src_app_log-harian_log-harian_module_ts.js","mappings":"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","sources":["./src/app/log-harian/log-harian-routing.module.ts","./src/app/log-harian/log-harian.module.ts","./src/app/log-harian/log-harian.page.ts","./src/app/log-harian/log-harian.page.html"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { LogHarianPage } from './log-harian.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: LogHarianPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class LogHarianPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { LogHarianPageRoutingModule } from './log-harian-routing.module';\r\n\r\nimport { LogHarianPage } from './log-harian.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    LogHarianPageRoutingModule\r\n  ],\r\n  declarations: [LogHarianPage]\r\n})\r\nexport class LogHarianPageModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Storage } from '@ionic/storage-angular';\r\nimport { AngularFirestore } from '@angular/fire/firestore';\r\nimport {\r\n  ToastController,\r\n  ModalController,\r\n  PopoverController,\r\n  AlertController,\r\n  LoadingController,\r\n} from '@ionic/angular';\r\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\r\nimport * as moment from 'moment';\r\nimport firebase from 'firebase';\r\nimport { LogDetailPage } from '../log-detail/log-detail.page';\r\n\r\n@Component({\r\n  selector: 'app-log-harian',\r\n  templateUrl: './log-harian.page.html',\r\n  styleUrls: ['./log-harian.page.scss'],\r\n})\r\nexport class LogHarianPage implements OnInit {\r\n  pasien = [];\r\n  constructor(\r\n    private storage: Storage,\r\n    private loadingController: LoadingController,\r\n    private modalController: ModalController,\r\n    private firestore: AngularFirestore,\r\n    private toastController: ToastController\r\n  ) {}\r\n\r\n  async ngOnInit() {\r\n    var snapshot = await firebase.firestore().collection('pasien').get();\r\n    if (snapshot.empty) {\r\n      this.pasien = [];\r\n    } else {\r\n      this.pasien = [];\r\n      snapshot.forEach((snap) => {\r\n        var data = snap.data();\r\n        data.id = snap.id;\r\n        this.pasien.push(data);\r\n      });\r\n      this.getLog();\r\n    }\r\n  }\r\n\r\n  getLog() {\r\n    this.pasien.map(async (pasien, index) => {\r\n      var snapshot = await firebase\r\n        .firestore()\r\n        .collection('pasien')\r\n        .doc(pasien.id)\r\n        .collection('log')\r\n        .orderBy('created_at', 'desc')\r\n        .get();\r\n      if (snapshot.empty) {\r\n        this.pasien[index].log = [];\r\n      } else {\r\n        var logs = [];\r\n        snapshot.forEach((snap) => {\r\n          var data = snap.data();\r\n          data.id = snap.id;\r\n          data.formattedtime = moment(data.created_at).format(\r\n            'DD MMM YYYY HH:mm'\r\n          );\r\n          logs.push(data);\r\n          console.log(logs);\r\n        });\r\n        this.pasien[index].log = logs;\r\n      }\r\n    });\r\n  }\r\n\r\n  async detail(pasien) {\r\n    const modal = await this.modalController.create({\r\n      component: LogDetailPage,\r\n      swipeToClose: true,\r\n      backdropDismiss: false,\r\n      componentProps: { onGoBack: () => {}, data: pasien },\r\n    });\r\n    modal.present();\r\n  }\r\n}\r\n","export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-title>Laporan Harian Pasien</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <ion-item>\\r\\n    <ion-label>ID Pasien</ion-label>\\r\\n    <ion-label>NIK</ion-label>\\r\\n    <ion-label>Nama</ion-label>\\r\\n    <ion-label>Update Terakhir</ion-label>\\r\\n    <ion-label>Action</ion-label>\\r\\n  </ion-item>\\r\\n  <ion-list>\\r\\n    <ion-item *ngFor=\\\"let p of pasien\\\">\\r\\n      <ion-label>{{p.id}}</ion-label>\\r\\n      <ion-label>{{p.nik}}</ion-label>\\r\\n      <ion-label>{{p.name}}</ion-label>\\r\\n      <ion-grid>\\r\\n        <ion-row *ngFor=\\\"let answer of p.log;let j = index\\\" style=\\\"border: 0\\\">\\r\\n          <ion-label *ngIf=\\\"j == 0\\\">{{answer.formattedtime}}</ion-label>\\r\\n        </ion-row>\\r\\n      </ion-grid>\\r\\n      <ion-label (click)=\\\"detail(p)\\\" color=\\\"primary\\\" style=\\\"cursor: pointer\\\"\\r\\n        >Detail</ion-label\\r\\n      >\\r\\n    </ion-item>\\r\\n  </ion-list>\\r\\n</ion-content>\\r\\n\";"],"names":[],"sourceRoot":"webpack:///"}