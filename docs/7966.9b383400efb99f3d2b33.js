"use strict";(self.webpackChunkpantau_dashboard=self.webpackChunkpantau_dashboard||[]).push([[7966],{7966:(w,u,s)=>{s.r(u),s.d(u,{AdminPageModule:()=>P});var m,g=s(8583),A=s(665),a=s(2859),h=s(3955),d=s(4762),p=s(2786),f=s(4742),i=s(3018),v=s(1628),Z=s(2005);function C(e,r){if(1&e&&(i.TgZ(0,"ion-label"),i._uU(1),i.qZA()),2&e){const t=r.$implicit;i.xp6(1),i.Oqu(t.label)}}function T(e,r){if(1&e){const t=i.EpF();i.TgZ(0,"ion-item"),i.TgZ(1,"ion-label"),i._uU(2),i.qZA(),i.TgZ(3,"ion-label"),i._uU(4),i.qZA(),i.TgZ(5,"ion-label"),i._uU(6),i.qZA(),i.TgZ(7,"ion-buttons",0),i.TgZ(8,"ion-button",5),i.NdJ("click",function(){const l=i.CHM(t).$implicit;return i.oxw().editAdmin(l)}),i._uU(9,"Edit"),i.qZA(),i.TgZ(10,"ion-button",6),i.NdJ("click",function(){const l=i.CHM(t).$implicit;return i.oxw().deleteAdmin(l)}),i._uU(11,"Hapus"),i.qZA(),i.qZA(),i.qZA()}if(2&e){const t=r.$implicit;i.xp6(2),i.Oqu(t.name),i.xp6(2),i.Oqu(t.username),i.xp6(2),i.Oqu(t.privileges)}}const _=[{path:"",component:(()=>{class e{constructor(t,n,o,l,c){this.storage=t,this.loadingController=n,this.modalController=o,this.firestore=l,this.toastController=c,this.column=[{label:"Name"},{label:"Username"},{label:"Privilege"},{label:"Action"}],t.get("admin").then(b=>{this.admin=JSON.parse(b),console.log("ADMIN:",this.admin)})}ngOnInit(){this.loadData()}loadData(){return(0,d.__awaiter)(this,void 0,void 0,function*(){var t=yield f.Z.firestore().collection("admin").get();t.empty?this.adminlist=[]:(this.adminlist=[],t.forEach(n=>{var o=n.data();o.id=n.id,this.adminlist.push(o)}),this.tmpadmin=this.adminlist)})}showForm(){return(0,d.__awaiter)(this,void 0,void 0,function*(){if("superadmin"==this.admin.privileges){var t=yield this.modalController.create({component:p.a,swipeToClose:!0,backdropDismiss:!1,componentProps:{onGoBack:()=>{this.loadData()}}});yield t.present()}else(yield this.toastController.create({message:"Hanya untuk Superadmin!",duration:3e3,position:"top",color:"dark"})).present()})}editAdmin(t){return(0,d.__awaiter)(this,void 0,void 0,function*(){if("superadmin"==this.admin.privileges){var n=yield this.modalController.create({component:p.a,swipeToClose:!0,backdropDismiss:!1,componentProps:{onGoBack:()=>{this.loadData()},data:t,isEdit:!0}});yield n.present()}else(yield this.toastController.create({message:"Hanya untuk Superadmin!",duration:3e3,position:"top",color:"dark"})).present()})}deleteAdmin(t){return(0,d.__awaiter)(this,void 0,void 0,function*(){"superadmin"==this.admin.privileges?(this.showLoading(),f.Z.firestore().collection("admin").doc(t.id).delete().then(()=>(0,d.__awaiter)(this,void 0,void 0,function*(){var o=yield this.toastController.create({message:"Admin berhasil dihapus",duration:3e3,color:"success"});this.hideLoading(),o.present(),this.loadData()})).catch(o=>(0,d.__awaiter)(this,void 0,void 0,function*(){this.hideLoading(),(yield this.toastController.create({message:"Gagal menghapus admin:"+o.message,duration:5e3,color:"danger"})).present()}))):(yield this.toastController.create({message:"Hanya untuk Superadmin!",duration:3e3,position:"top",color:"dark"})).present()})}search(t){const n=t.detail.value;0==n.length?this.adminlist=this.tmpadmin:(this.adminlist=this.tmpadmin,this.adminlist=this.adminlist.filter(o=>o.name.toLowerCase().includes(n.toLowerCase())||o.username.toLowerCase().includes(n.toLowerCase())||o.alamat.toLowerCase().includes(n.toLowerCase())))}showLoading(){return(0,d.__awaiter)(this,void 0,void 0,function*(){m=yield this.loadingController.create({cssClass:"my-custom-class",message:"Please wait..."}),yield m.present()})}hideLoading(){m.dismiss()}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(v.K),i.Y36(a.HT),i.Y36(a.IN),i.Y36(Z.ST),i.Y36(a.yF))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-admin"]],decls:14,vars:2,consts:[["slot","end"],["color","secondary",3,"click"],["name","person-add-outline"],[3,"ionChange"],[4,"ngFor","ngForOf"],["fill","clear","color","primary",3,"click"],["fill","clear","color","danger",3,"click"]],template:function(t,n){1&t&&(i.TgZ(0,"ion-header"),i.TgZ(1,"ion-toolbar"),i.TgZ(2,"ion-title"),i._uU(3,"Admin"),i.qZA(),i.TgZ(4,"ion-buttons",0),i.TgZ(5,"ion-button",1),i.NdJ("click",function(){return n.showForm()}),i._UZ(6,"ion-icon",2),i._uU(7," Tambah Admin "),i.qZA(),i.qZA(),i.qZA(),i.TgZ(8,"ion-searchbar",3),i.NdJ("ionChange",function(l){return n.search(l)}),i.qZA(),i.qZA(),i.TgZ(9,"ion-content"),i.TgZ(10,"ion-item"),i.YNc(11,C,2,1,"ion-label",4),i.qZA(),i.TgZ(12,"ion-list"),i.YNc(13,T,12,3,"ion-item",4),i.qZA(),i.qZA()),2&t&&(i.xp6(11),i.Q6J("ngForOf",n.column),i.xp6(2),i.Q6J("ngForOf",n.adminlist))},directives:[a.Gu,a.sr,a.wd,a.Sm,a.YG,a.gu,a.VI,a.j9,a.W2,a.Ie,g.sg,a.q_,a.Q$],styles:[""]}),e})()}];let y=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[h.Bz.forChild(_)],h.Bz]}),e})(),P=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[g.ez,A.u5,a.Pc,y]]}),e})()}}]);